2025-03-07 10:37:12,378 - __main__ - INFO - Directories created
2025-03-07 10:37:12,378 - __main__ - INFO - Processing tender 10/2024/CONM-CEE for client client123...
2025-03-07 10:37:12,378 - __main__ - INFO - Starting tender processing for tender_id=10/2024/CONM-CEE, client_id=client123
2025-03-07 10:37:12,378 - __main__ - INFO - All documents already have markdown versions, skipping download and conversion
2025-03-07 10:37:12,378 - __main__ - INFO - Generating hierarchical chunks for markdown files
2025-03-07 10:37:12,384 - __main__ - INFO - Saved chunk hierarchy to data/chunks/10/2024/CONM-CEE/doc1_chunks.json
2025-03-07 10:37:12,385 - __main__ - INFO - Saved chunk hierarchy to data/chunks/10/2024/CONM-CEE/doc2_chunks.json
2025-03-07 10:37:12,389 - __main__ - INFO - Saved chunk hierarchy to data/chunks/10/2024/CONM-CEE/doc3_chunks.json
2025-03-07 10:37:12,390 - __main__ - INFO - Saved chunk hierarchy to data/chunks/10/2024/CONM-CEE/doc4_chunks.json
2025-03-07 10:37:12,391 - __main__ - INFO - Saved chunk hierarchy to data/chunks/10/2024/CONM-CEE/doc5_chunks.json
2025-03-07 10:37:12,395 - __main__ - INFO - Saved combined chunks to data/chunks/10/2024/CONM-CEE/combined_chunks.json
2025-03-07 10:37:12,395 - ai_document_generator_service - INFO - Generating AI documents using chunks...
2025-03-07 10:37:12,398 - ai_document_generator_service - INFO - Processing section 1/2...
2025-03-07 10:37:12,399 - root - INFO - AFC is enabled with max remote calls: 10.
2025-03-07 10:37:12,399 - ai_document_generator_service - INFO - Processing section 2/2...
2025-03-07 10:37:12,402 - root - INFO - AFC is enabled with max remote calls: 10.
2025-03-07 10:37:25,034 - root - INFO - AFC remote call 1 is done.
2025-03-07 10:37:25,036 - ai_document_generator_service - INFO - 
Section 1 completed in 12.64 seconds
2025-03-07 10:37:25,036 - ai_document_generator_service - INFO - Token Usage:
2025-03-07 10:37:25,036 - ai_document_generator_service - INFO -   Prompt tokens: 79527
2025-03-07 10:37:25,036 - ai_document_generator_service - INFO -   Response tokens: 2149
2025-03-07 10:37:25,036 - ai_document_generator_service - INFO -   Section total: 81676
2025-03-07 10:37:26,811 - root - INFO - AFC remote call 1 is done.
2025-03-07 10:37:26,812 - ai_document_generator_service - INFO - 
Section 2 completed in 14.41 seconds
2025-03-07 10:37:26,812 - ai_document_generator_service - INFO - Token Usage:
2025-03-07 10:37:26,812 - ai_document_generator_service - INFO -   Prompt tokens: 79353
2025-03-07 10:37:26,812 - ai_document_generator_service - INFO -   Response tokens: 2597
2025-03-07 10:37:26,812 - ai_document_generator_service - INFO -   Section total: 81950
2025-03-07 10:37:26,816 - ai_document_generator_service - INFO - Section 1 saved to data/client_docs/client123_10/2024/sections/section_1.md
2025-03-07 10:37:26,817 - ai_document_generator_service - INFO - Section 2 saved to data/client_docs/client123_10/2024/sections/section_2.md
2025-03-07 10:37:26,818 - ai_document_generator_service - INFO - Complete AI document with chunk references written to data/client_docs/client123_10/2024/CONM-CEE_1741340232.md
2025-03-07 10:37:26,819 - __main__ - INFO - Processing chunk references in data/client_docs/client123_10/2024/CONM-CEE_1741340232.md
2025-03-07 10:37:26,819 - __main__ - INFO - Found 52 chunk references in the document
2025-03-07 10:37:26,823 - __main__ - INFO - Reference statistics: 49 exact matches (94.2%), 3 doc+page matches (5.8%), 0 doc-only matches (0.0%), 0 legacy fuzzy matches (0.0%), 0 no matches (0.0%)
2025-03-07 10:37:26,824 - __main__ - INFO - Document+page match: 'chunk_DOC20241111094338ANEXO_I_1741284737,3,s1_2.3.3' to 'chunk_DOC20241111094338ANEXO_I_1741284737,3,s1_1.3.5.2'
2025-03-07 10:37:26,824 - __main__ - INFO - Document+page match: 'chunk_DOC20241111094338ANEXO_I_1741284737,3,s1_2.3.3' to 'chunk_DOC20241111094338ANEXO_I_1741284737,3,s1_1.3.5.2'
2025-03-07 10:37:26,824 - __main__ - INFO - Document+page match: 'chunk_DOC20241111091415Pliego_de_prescripciones_tecnicas,1,s1_7.2' to 'chunk_DOC20241111091415Pliego_de_prescripciones_tecnicas,1,s1_1'
2025-03-07 10:37:26,825 - __main__ - INFO - Processed document saved to data/processed/processed_client123_10/2024/CONM-CEE.md
2025-03-07 10:37:26,828 - __main__ - INFO - Document+page match: 'chunk_DOC20241111094338ANEXO_I_1741284737,3,s1_2.3.3' to 'chunk_DOC20241111094338ANEXO_I_1741284737,3,s1_1.3.5.2' for metadata
2025-03-07 10:37:26,828 - __main__ - INFO - Document+page match: 'chunk_DOC20241111094338ANEXO_I_1741284737,3,s1_2.3.3' to 'chunk_DOC20241111094338ANEXO_I_1741284737,3,s1_1.3.5.2' for metadata
2025-03-07 10:37:26,828 - __main__ - INFO - Document+page match: 'chunk_DOC20241111091415Pliego_de_prescripciones_tecnicas,1,s1_7.2' to 'chunk_DOC20241111091415Pliego_de_prescripciones_tecnicas,1,s1_1' for metadata
2025-03-07 10:37:26,828 - __main__ - INFO - Reference metadata statistics: 49 exact matches (94.2%), 3 doc+page matches (5.8%), 0 doc-only matches (0.0%), 0 legacy fuzzy matches (0.0%), 0 no matches (0.0%)
2025-03-07 10:37:26,830 - __main__ - INFO - Reference metadata saved to data/processed/reference_metadata_client123_10/2024/CONM-CEE.json
2025-03-07 10:37:26,830 - __main__ - INFO - Processed document saved to data/processed/processed_client123_10/2024/CONM-CEE.md
2025-03-07 10:37:26,830 - __main__ - INFO - Reference metadata saved to data/processed/reference_metadata_client123_10/2024/CONM-CEE.json
2025-03-07 10:37:26,830 - ai_document_generator_service - INFO - Generating conversational summary from AI document...
2025-03-07 10:37:26,830 - root - INFO - AFC is enabled with max remote calls: 10.
2025-03-07 10:37:28,207 - root - INFO - AFC remote call 1 is done.
2025-03-07 10:37:28,207 - ai_document_generator_service - INFO - 
Token Usage (Summary):
2025-03-07 10:37:28,207 - ai_document_generator_service - INFO - Prompt tokens: 5091
2025-03-07 10:37:28,207 - ai_document_generator_service - INFO - Response tokens: 224
2025-03-07 10:37:28,207 - ai_document_generator_service - INFO - Total tokens: 5315
2025-03-07 10:37:28,207 - __main__ - INFO - Tender processing completed in 15.83 seconds
2025-03-07 10:37:28,208 - __main__ - INFO - === Processing Results ===
2025-03-07 10:37:28,208 - __main__ - INFO - AI Summary: True
2025-03-07 10:37:28,208 - __main__ - INFO - AI Document: data/client_docs/client123_10/2024/CONM-CEE_1741340232.md
2025-03-07 10:37:28,208 - __main__ - INFO - Processed Document with References: data/processed/processed_client123_10/2024/CONM-CEE.md
2025-03-07 10:37:28,208 - __main__ - INFO - Reference Metadata: data/processed/reference_metadata_client123_10/2024/CONM-CEE.json
2025-03-07 10:37:28,208 - __main__ - INFO - Processing time: 15.83 seconds
2025-03-07 10:37:28,208 - __main__ - INFO - 
AI Summary Sample:
2025-03-07 10:37:28,208 - __main__ - INFO - La licitación 10/2024/CONM-CEE busca un proveedor para el suministro de plantas y decoración floral navideña en el centro de Jaén. Se divide en dos lotes: Lote 1: Suministro de plantas de temporada (7...
2025-03-07 11:23:26,059 - __main__ - INFO - Directories created
2025-03-07 11:23:26,060 - __main__ - INFO - Processing tender 10/2024/CONM-CEE for client client123...
2025-03-07 11:23:26,060 - __main__ - INFO - Starting tender processing for tender_id=10/2024/CONM-CEE, client_id=client123
2025-03-07 11:23:26,060 - __main__ - INFO - All documents already have markdown versions, skipping download and conversion
2025-03-07 11:23:26,060 - __main__ - INFO - Generating hierarchical chunks for markdown files
2025-03-07 11:23:26,067 - __main__ - INFO - Saved chunk hierarchy to data/chunks/10/2024/CONM-CEE/doc1_chunks.json
2025-03-07 11:23:26,068 - __main__ - INFO - Saved chunk hierarchy to data/chunks/10/2024/CONM-CEE/doc2_chunks.json
2025-03-07 11:23:26,071 - __main__ - INFO - Saved chunk hierarchy to data/chunks/10/2024/CONM-CEE/doc3_chunks.json
2025-03-07 11:23:26,073 - __main__ - INFO - Saved chunk hierarchy to data/chunks/10/2024/CONM-CEE/doc4_chunks.json
2025-03-07 11:23:26,074 - __main__ - INFO - Saved chunk hierarchy to data/chunks/10/2024/CONM-CEE/doc5_chunks.json
2025-03-07 11:23:26,078 - __main__ - INFO - Saved combined chunks to data/chunks/10/2024/CONM-CEE/combined_chunks.json
2025-03-07 11:23:26,079 - ai_document_generator_service - INFO - Generating AI documents using chunks...
2025-03-07 11:23:26,081 - ai_document_generator_service - INFO - Processing section 1/2...
2025-03-07 11:23:26,082 - root - INFO - AFC is enabled with max remote calls: 10.
2025-03-07 11:23:26,082 - ai_document_generator_service - INFO - Processing section 2/2...
2025-03-07 11:23:26,084 - root - INFO - AFC is enabled with max remote calls: 10.
2025-03-07 11:23:33,917 - root - INFO - AFC remote call 1 is done.
2025-03-07 11:23:33,918 - ai_document_generator_service - INFO - 
Section 2 completed in 7.84 seconds
2025-03-07 11:23:33,918 - ai_document_generator_service - INFO - Token Usage:
2025-03-07 11:23:33,918 - ai_document_generator_service - INFO -   Prompt tokens: 79353
2025-03-07 11:23:33,918 - ai_document_generator_service - INFO -   Response tokens: 1137
2025-03-07 11:23:33,918 - ai_document_generator_service - INFO -   Section total: 80490
2025-03-07 11:23:33,920 - root - INFO - AFC remote call 1 is done.
2025-03-07 11:23:33,921 - ai_document_generator_service - INFO - 
Section 1 completed in 7.84 seconds
2025-03-07 11:23:33,921 - ai_document_generator_service - INFO - Token Usage:
2025-03-07 11:23:33,921 - ai_document_generator_service - INFO -   Prompt tokens: 79527
2025-03-07 11:23:33,921 - ai_document_generator_service - INFO -   Response tokens: 1150
2025-03-07 11:23:33,921 - ai_document_generator_service - INFO -   Section total: 80677
2025-03-07 11:23:33,923 - ai_document_generator_service - INFO - Section 1 saved to data/client_docs/client123_10/2024/sections/section_1.md
2025-03-07 11:23:33,924 - ai_document_generator_service - INFO - Section 2 saved to data/client_docs/client123_10/2024/sections/section_2.md
2025-03-07 11:23:33,925 - ai_document_generator_service - INFO - Complete AI document with chunk references written to data/client_docs/client123_10/2024/CONM-CEE_1741343006.md
2025-03-07 11:23:33,925 - __main__ - INFO - Processing chunk references in data/client_docs/client123_10/2024/CONM-CEE_1741343006.md
2025-03-07 11:23:33,925 - __main__ - INFO - Found 28 chunk references in the document
2025-03-07 11:23:33,931 - __main__ - INFO - Reference statistics: 0 exact matches (0.0%), 0 doc+page matches (0.0%), 0 doc-only matches (0.0%), 0 legacy fuzzy matches (0.0%), 28 no matches (100.0%)
2025-03-07 11:23:33,931 - __main__ - WARNING - Chunk reference not found: chunk_DOC20241111094338ANEXO_I,0,s1_1.1
2025-03-07 11:23:33,931 - __main__ - WARNING - Chunk reference not found: chunk_DOC20241111094338ANEXO_I,0,s1_1.3
2025-03-07 11:23:33,932 - __main__ - WARNING - Chunk reference not found: chunk_DOC20241111094338ANEXO_I,0,s1_1.1
2025-03-07 11:23:33,932 - __main__ - WARNING - Chunk reference not found: chunk_DOC20241111094338ANEXO_I,0,s1_1.3.3
2025-03-07 11:23:33,932 - __main__ - WARNING - Chunk reference not found: chunk_DOC20241111094338ANEXO_I,1,s1_1.3.5.4
2025-03-07 11:23:33,932 - __main__ - WARNING - Chunk reference not found: chunk_DOC20241111094338ANEXO_I,1,s1_1.3.3.4
2025-03-07 11:23:33,932 - __main__ - WARNING - Chunk reference not found: chunk_DOC20241111094338ANEXO_I,1,s1_1.3.3.5
2025-03-07 11:23:33,932 - __main__ - WARNING - Chunk reference not found: chunk_DOC20241111094338ANEXO_I,1,s1_1.3.3.9
2025-03-07 11:23:33,932 - __main__ - WARNING - Chunk reference not found: chunk_DOC20241111094338ANEXO_I,1,s1_1.3.5.4
2025-03-07 11:23:33,932 - __main__ - WARNING - Chunk reference not found: chunk_DOC20241111094338ANEXO_I,0,s1_1.3.2
2025-03-07 11:23:33,933 - __main__ - WARNING - Chunk reference not found: chunk_DOC20241111094338ANEXO_I,0,s1_1.3.3
2025-03-07 11:23:33,933 - __main__ - WARNING - Chunk reference not found: chunk_DOC20241111094338ANEXO_I,1,s1_1.3.3.5
2025-03-07 11:23:33,933 - __main__ - WARNING - Chunk reference not found: chunk_DOC20241111094338ANEXO_I,1,s1_1.3.3.9
2025-03-07 11:23:33,933 - __main__ - WARNING - Chunk reference not found: chunk_DOC20241111094338ANEXO_I,4,s1_2.3.1
2025-03-07 11:23:33,933 - __main__ - WARNING - Chunk reference not found: chunk_DOC20241111094338ANEXO_I,4,s1_2.3.2
2025-03-07 11:23:33,933 - __main__ - WARNING - Chunk reference not found: chunk_DOC20241111094338ANEXO_I,4,s1_2.3.2
2025-03-07 11:23:33,933 - __main__ - WARNING - Chunk reference not found: chunk_DOC20241111094338ANEXO_I,4,s1_2.3.2
2025-03-07 11:23:33,934 - __main__ - WARNING - Chunk reference not found: chunk_DOC20241111094338ANEXO_I,4,s1_2.3.2
2025-03-07 11:23:33,934 - __main__ - WARNING - Chunk reference not found: chunk_DOC20241111094338ANEXO_I,4,s1_2.3.2
2025-03-07 11:23:33,934 - __main__ - WARNING - Chunk reference not found: chunk_DOC20241111094338ANEXO_I,2,s1_1.3.5.1
2025-03-07 11:23:33,934 - __main__ - WARNING - Chunk reference not found: chunk_DOC20241111094338ANEXO_I,2,s1_1.3.5.1
2025-03-07 11:23:33,934 - __main__ - WARNING - Chunk reference not found: chunk_DOC20241111094338ANEXO_I,2,s1_1.3.5.1
2025-03-07 11:23:33,934 - __main__ - WARNING - Chunk reference not found: chunk_DOC20241111094338ANEXO_I,2,s1_1.3.5
2025-03-07 11:23:33,934 - __main__ - WARNING - Chunk reference not found: chunk_DOC20241111094338ANEXO_I,1,s1_1.3.3
2025-03-07 11:23:33,934 - __main__ - WARNING - Chunk reference not found: chunk_DOC20241111094338ANEXO_I,4,s1_2.3.1
2025-03-07 11:23:33,935 - __main__ - WARNING - Chunk reference not found: chunk_DOC20241111094338ANEXO_I,2,s1_1.3.5.1
2025-03-07 11:23:33,935 - __main__ - WARNING - Chunk reference not found: chunk_DOC20241111094338ANEXO_I,4,s1_2.3.1
2025-03-07 11:23:33,935 - __main__ - WARNING - Chunk reference not found: chunk_DOC20241111094338ANEXO_I,4,s1_2.3.1
2025-03-07 11:23:33,935 - __main__ - INFO - Processed document saved to data/processed/processed_client123_10/2024/CONM-CEE.md
2025-03-07 11:23:33,937 - __main__ - WARNING - Chunk chunk_DOC20241111094338ANEXO_I,0,s1_1.1 not found in metadata
2025-03-07 11:23:33,938 - __main__ - WARNING - Chunk chunk_DOC20241111094338ANEXO_I,0,s1_1.3 not found in metadata
2025-03-07 11:23:33,938 - __main__ - WARNING - Chunk chunk_DOC20241111094338ANEXO_I,0,s1_1.1 not found in metadata
2025-03-07 11:23:33,938 - __main__ - WARNING - Chunk chunk_DOC20241111094338ANEXO_I,0,s1_1.3.3 not found in metadata
2025-03-07 11:23:33,938 - __main__ - WARNING - Chunk chunk_DOC20241111094338ANEXO_I,1,s1_1.3.5.4 not found in metadata
2025-03-07 11:23:33,938 - __main__ - WARNING - Chunk chunk_DOC20241111094338ANEXO_I,1,s1_1.3.3.4 not found in metadata
2025-03-07 11:23:33,938 - __main__ - WARNING - Chunk chunk_DOC20241111094338ANEXO_I,1,s1_1.3.3.5 not found in metadata
2025-03-07 11:23:33,938 - __main__ - WARNING - Chunk chunk_DOC20241111094338ANEXO_I,1,s1_1.3.3.9 not found in metadata
2025-03-07 11:23:33,938 - __main__ - WARNING - Chunk chunk_DOC20241111094338ANEXO_I,1,s1_1.3.5.4 not found in metadata
2025-03-07 11:23:33,938 - __main__ - WARNING - Chunk chunk_DOC20241111094338ANEXO_I,0,s1_1.3.2 not found in metadata
2025-03-07 11:23:33,939 - __main__ - WARNING - Chunk chunk_DOC20241111094338ANEXO_I,0,s1_1.3.3 not found in metadata
2025-03-07 11:23:33,939 - __main__ - WARNING - Chunk chunk_DOC20241111094338ANEXO_I,1,s1_1.3.3.5 not found in metadata
2025-03-07 11:23:33,939 - __main__ - WARNING - Chunk chunk_DOC20241111094338ANEXO_I,1,s1_1.3.3.9 not found in metadata
2025-03-07 11:23:33,939 - __main__ - WARNING - Chunk chunk_DOC20241111094338ANEXO_I,4,s1_2.3.1 not found in metadata
2025-03-07 11:23:33,939 - __main__ - WARNING - Chunk chunk_DOC20241111094338ANEXO_I,4,s1_2.3.2 not found in metadata
2025-03-07 11:23:33,939 - __main__ - WARNING - Chunk chunk_DOC20241111094338ANEXO_I,4,s1_2.3.2 not found in metadata
2025-03-07 11:23:33,939 - __main__ - WARNING - Chunk chunk_DOC20241111094338ANEXO_I,4,s1_2.3.2 not found in metadata
2025-03-07 11:23:33,939 - __main__ - WARNING - Chunk chunk_DOC20241111094338ANEXO_I,4,s1_2.3.2 not found in metadata
2025-03-07 11:23:33,939 - __main__ - WARNING - Chunk chunk_DOC20241111094338ANEXO_I,4,s1_2.3.2 not found in metadata
2025-03-07 11:23:33,940 - __main__ - WARNING - Chunk chunk_DOC20241111094338ANEXO_I,2,s1_1.3.5.1 not found in metadata
2025-03-07 11:23:33,940 - __main__ - WARNING - Chunk chunk_DOC20241111094338ANEXO_I,2,s1_1.3.5.1 not found in metadata
2025-03-07 11:23:33,940 - __main__ - WARNING - Chunk chunk_DOC20241111094338ANEXO_I,2,s1_1.3.5.1 not found in metadata
2025-03-07 11:23:33,940 - __main__ - WARNING - Chunk chunk_DOC20241111094338ANEXO_I,2,s1_1.3.5 not found in metadata
2025-03-07 11:23:33,940 - __main__ - WARNING - Chunk chunk_DOC20241111094338ANEXO_I,1,s1_1.3.3 not found in metadata
2025-03-07 11:23:33,940 - __main__ - WARNING - Chunk chunk_DOC20241111094338ANEXO_I,4,s1_2.3.1 not found in metadata
2025-03-07 11:23:33,940 - __main__ - WARNING - Chunk chunk_DOC20241111094338ANEXO_I,2,s1_1.3.5.1 not found in metadata
2025-03-07 11:23:33,940 - __main__ - WARNING - Chunk chunk_DOC20241111094338ANEXO_I,4,s1_2.3.1 not found in metadata
2025-03-07 11:23:33,940 - __main__ - WARNING - Chunk chunk_DOC20241111094338ANEXO_I,4,s1_2.3.1 not found in metadata
2025-03-07 11:23:33,940 - __main__ - INFO - Reference metadata statistics: 0 exact matches (0.0%), 0 doc+page matches (0.0%), 0 doc-only matches (0.0%), 0 legacy fuzzy matches (0.0%), 28 no matches (100.0%)
2025-03-07 11:23:33,941 - __main__ - INFO - Reference metadata saved to data/processed/reference_metadata_client123_10/2024/CONM-CEE.json
2025-03-07 11:23:33,941 - __main__ - INFO - Processed document saved to data/processed/processed_client123_10/2024/CONM-CEE.md
2025-03-07 11:23:33,941 - __main__ - INFO - Reference metadata saved to data/processed/reference_metadata_client123_10/2024/CONM-CEE.json
2025-03-07 11:23:33,941 - ai_document_generator_service - INFO - Generating conversational summary from AI document...
2025-03-07 11:23:33,941 - root - INFO - AFC is enabled with max remote calls: 10.
2025-03-07 11:23:35,516 - root - INFO - AFC remote call 1 is done.
2025-03-07 11:23:35,516 - ai_document_generator_service - INFO - 
Token Usage (Summary):
2025-03-07 11:23:35,516 - ai_document_generator_service - INFO - Prompt tokens: 2632
2025-03-07 11:23:35,516 - ai_document_generator_service - INFO - Response tokens: 148
2025-03-07 11:23:35,516 - ai_document_generator_service - INFO - Total tokens: 2780
2025-03-07 11:23:35,517 - __main__ - INFO - Tender processing completed in 9.46 seconds
2025-03-07 11:23:35,517 - __main__ - INFO - === Processing Results ===
2025-03-07 11:23:35,517 - __main__ - INFO - AI Summary: True
2025-03-07 11:23:35,517 - __main__ - INFO - AI Document: data/client_docs/client123_10/2024/CONM-CEE_1741343006.md
2025-03-07 11:23:35,517 - __main__ - INFO - Processed Document with References: data/processed/processed_client123_10/2024/CONM-CEE.md
2025-03-07 11:23:35,517 - __main__ - INFO - Reference Metadata: data/processed/reference_metadata_client123_10/2024/CONM-CEE.json
2025-03-07 11:23:35,517 - __main__ - INFO - Processing time: 9.46 seconds
2025-03-07 11:23:35,517 - __main__ - INFO - 
AI Summary Sample:
2025-03-07 11:23:35,518 - __main__ - INFO - La licitación 10/2024/CONM-CEE busca un proveedor para un contrato mixto de plantas y decoración floral navideña para el embellecimiento del centro de Jaén. El proyecto se divide en dos lotes: Suminis...
2025-03-07 11:32:48,812 - __main__ - INFO - Directories created
2025-03-07 11:32:48,814 - __main__ - INFO - Processing tender 10/2024/CONM-CEE for client client123...
2025-03-07 11:32:48,814 - __main__ - INFO - Starting tender processing for tender_id=10/2024/CONM-CEE, client_id=client123
2025-03-07 11:32:48,814 - __main__ - INFO - Processing 5 missing documents
2025-03-07 11:32:48,814 - document_retrieval_service - INFO - Downloading PDF from https://contrataciondelestado.es/FileSystem/servlet/GetDocumentByIdServlet?DocumentIdParam=cGvQdaF/qmEnKvN211kkZep9eLYPa5sPlu0VFp1fA/h5Fg1pTaKl4FN73msJksylIVq1IvdI5PofzpP36PwDr6Jmx2BDu2S/t4P9dvlPFULfdyQgZAdTm3EfcUAC7CJ6&cifrado=QUC1GjXXSiLkydRHJBmbpw%3D%3D...
2025-03-07 11:32:50,091 - document_retrieval_service - INFO - PDF downloaded to data/raw_pdfs/DOC_CN2024-001193585_1741343569.pdf
2025-03-07 11:32:50,092 - document_retrieval_service - INFO - Downloading PDF from https://contrataciondelestado.es/FileSystem/servlet/GetDocumentByIdServlet?DocumentIdParam=z/ghU5864J3UKnVAwwWNrCp9Nvi9o32DrO2HfqSQ/7y0QPTDGl%2BTgSxAzGaBF9hR0w94oIWtN2EkYA0Og4DmgZLmV7aY3ZdlQ8%2BxtPvjDpeB0nvVKRzfe4rpHcnlPhSZ&cifrado=QUC1GjXXSiLkydRHJBmbpw%3D%3D...
2025-03-07 11:32:51,048 - document_retrieval_service - INFO - PDF downloaded to data/raw_pdfs/DOC20241111091415Pliego_de_prescripciones_tecnicas_1741343570.pdf
2025-03-07 11:32:51,049 - document_retrieval_service - INFO - Downloading PDF from https://contrataciondelestado.es/FileSystem/servlet/GetDocumentByIdServlet?DocumentIdParam=8hgVPRbuSgXhyguKtFy5AiXeHvokF%2B2dllmtzd8sapWTAcvE3IDVxGhRuhi9GWXq2A4V3aEdzAqu7KG6zJkIGd4Rr6XPeaqztAIX1SSQM%2B2B0nvVKRzfe4rpHcnlPhSZ&cifrado=QUC1GjXXSiLkydRHJBmbpw%3D%3D...
2025-03-07 11:32:51,979 - document_retrieval_service - INFO - PDF downloaded to data/raw_pdfs/DOC20241111092201Pliego_de_clausulas_administrativas_1741343571.pdf
2025-03-07 11:32:51,979 - document_retrieval_service - INFO - Downloading PDF from https://contrataciondelestado.es/FileSystem/servlet/GetDocumentByIdServlet?DocumentIdParam=wpL05Sv0vuASNVV59os02t1zLXzhEwhUpVrAmIiI4w%2B06WPE0AvLvdg6w0OZqYyrGivKjCsC2R7gEgBRON2aZeZ1y1C5nSiBmcFaXawL1GJt/o8fNevwsujgRzaBbugn&cifrado=QUC1GjXXSiLkydRHJBmbpw%3D%3D...
2025-03-07 11:32:52,922 - document_retrieval_service - INFO - PDF downloaded to data/raw_pdfs/DOC20241111094338ANEXO_I_1741343572.pdf
2025-03-07 11:32:52,922 - document_retrieval_service - INFO - Downloading PDF from https://contrataciondelestado.es/FileSystem/servlet/GetDocumentByIdServlet?DocumentIdParam=FfZj3XI6OlOTOzDyKek0lnaI3ORlarheXliAsx0JVVCd5gsL7ycTWihmq01TkQC8e9oC1wwahAymbwR1EgIyQ86irt%2BO9F0D/Qe6kMPxUA%2B1aXEvq3KHa/AEHgtDrQw0&cifrado=QUC1GjXXSiLkydRHJBmbpw%3D%3D...
2025-03-07 11:32:53,664 - document_retrieval_service - INFO - PDF downloaded to data/raw_pdfs/DOC20241111094425ANEXO_II_1741343573.pdf
2025-03-07 11:32:53,665 - document_conversion_service - INFO - Submitting data/raw_pdfs/DOC_CN2024-001193585_1741343569.pdf to Marker API...
2025-03-07 11:32:55,547 - document_conversion_service - INFO - Processing request yTaeO0bAEtCzMXHtWhX2JA...
2025-03-07 11:32:57,186 - document_conversion_service - INFO - Successfully converted data/raw_pdfs/DOC_CN2024-001193585_1741343569.pdf to data/markdown/DOC_CN2024-001193585_1741343569.md
2025-03-07 11:32:57,188 - document_conversion_service - INFO - Submitting data/raw_pdfs/DOC20241111091415Pliego_de_prescripciones_tecnicas_1741343570.pdf to Marker API...
2025-03-07 11:32:59,846 - document_conversion_service - INFO - Processing request eCNBgCN6Yh9Ff5TBZq9HYg...
2025-03-07 11:33:02,817 - document_conversion_service - INFO - Successfully converted data/raw_pdfs/DOC20241111091415Pliego_de_prescripciones_tecnicas_1741343570.pdf to data/markdown/DOC20241111091415Pliego_de_prescripciones_tecnicas_1741343570.md
2025-03-07 11:33:02,818 - document_conversion_service - INFO - Submitting data/raw_pdfs/DOC20241111092201Pliego_de_clausulas_administrativas_1741343571.pdf to Marker API...
2025-03-07 11:33:04,727 - document_conversion_service - INFO - Processing request tDunbCDUszc_rPX0JH0vgw...
2025-03-07 11:33:08,290 - document_conversion_service - INFO - Successfully converted data/raw_pdfs/DOC20241111092201Pliego_de_clausulas_administrativas_1741343571.pdf to data/markdown/DOC20241111092201Pliego_de_clausulas_administrativas_1741343571.md
2025-03-07 11:33:08,291 - document_conversion_service - INFO - Submitting data/raw_pdfs/DOC20241111094338ANEXO_I_1741343572.pdf to Marker API...
2025-03-07 11:33:10,289 - document_conversion_service - INFO - Processing request pSOUj_j8ylceFwSrPoV_7Q...
2025-03-07 11:33:12,667 - document_conversion_service - INFO - Successfully converted data/raw_pdfs/DOC20241111094338ANEXO_I_1741343572.pdf to data/markdown/DOC20241111094338ANEXO_I_1741343572.md
2025-03-07 11:33:12,668 - document_conversion_service - INFO - Submitting data/raw_pdfs/DOC20241111094425ANEXO_II_1741343573.pdf to Marker API...
2025-03-07 11:33:15,306 - document_conversion_service - INFO - Processing request 4xEDrS7zPqeOXixd37JgPQ...
2025-03-07 11:33:18,179 - document_conversion_service - INFO - Successfully converted data/raw_pdfs/DOC20241111094425ANEXO_II_1741343573.pdf to data/markdown/DOC20241111094425ANEXO_II_1741343573.md
2025-03-07 11:33:18,180 - __main__ - INFO - Generating hierarchical chunks for markdown files
2025-03-07 11:33:18,189 - __main__ - INFO - Saved chunk hierarchy to data/chunks/10/2024/CONM-CEE/doc1_chunks.json
2025-03-07 11:33:18,190 - __main__ - INFO - Saved chunk hierarchy to data/chunks/10/2024/CONM-CEE/doc2_chunks.json
2025-03-07 11:33:18,196 - __main__ - INFO - Saved chunk hierarchy to data/chunks/10/2024/CONM-CEE/doc3_chunks.json
2025-03-07 11:33:18,199 - __main__ - INFO - Saved chunk hierarchy to data/chunks/10/2024/CONM-CEE/doc4_chunks.json
2025-03-07 11:33:18,200 - __main__ - INFO - Saved chunk hierarchy to data/chunks/10/2024/CONM-CEE/doc5_chunks.json
2025-03-07 11:33:18,205 - __main__ - INFO - Saved combined chunks to data/chunks/10/2024/CONM-CEE/combined_chunks.json
2025-03-07 11:33:18,206 - ai_document_generator_service - INFO - Generating AI documents using chunks...
2025-03-07 11:33:18,209 - ai_document_generator_service - INFO - Processing section 1/2...
2025-03-07 11:33:18,212 - root - INFO - AFC is enabled with max remote calls: 10.
2025-03-07 11:33:18,212 - ai_document_generator_service - INFO - Processing section 2/2...
2025-03-07 11:33:18,216 - root - INFO - AFC is enabled with max remote calls: 10.
2025-03-07 11:33:32,208 - root - INFO - AFC remote call 1 is done.
2025-03-07 11:33:32,210 - ai_document_generator_service - INFO - 
Section 1 completed in 14.00 seconds
2025-03-07 11:33:32,210 - ai_document_generator_service - INFO - Token Usage:
2025-03-07 11:33:32,210 - ai_document_generator_service - INFO -   Prompt tokens: 81809
2025-03-07 11:33:32,210 - ai_document_generator_service - INFO -   Response tokens: 2152
2025-03-07 11:33:32,210 - ai_document_generator_service - INFO -   Section total: 83961
2025-03-07 11:33:56,897 - root - INFO - AFC remote call 1 is done.
2025-03-07 11:33:56,899 - ai_document_generator_service - INFO - 
Section 2 completed in 38.69 seconds
2025-03-07 11:33:56,899 - ai_document_generator_service - INFO - Token Usage:
2025-03-07 11:33:56,899 - ai_document_generator_service - INFO -   Prompt tokens: 81635
2025-03-07 11:33:56,899 - ai_document_generator_service - INFO -   Response tokens: 8192
2025-03-07 11:33:56,899 - ai_document_generator_service - INFO -   Section total: 89827
2025-03-07 11:33:56,900 - ai_document_generator_service - INFO - Section 1 saved to data/client_docs/client123_10/2024/sections/section_1.md
2025-03-07 11:33:56,901 - ai_document_generator_service - INFO - Section 2 saved to data/client_docs/client123_10/2024/sections/section_2.md
2025-03-07 11:33:56,901 - ai_document_generator_service - INFO - Complete AI document with chunk references written to data/client_docs/client123_10/2024/CONM-CEE_1741343598.md
2025-03-07 11:33:56,902 - __main__ - INFO - Processing chunk references in data/client_docs/client123_10/2024/CONM-CEE_1741343598.md
2025-03-07 11:33:56,902 - __main__ - INFO - Found 102 chunk references in the document
2025-03-07 11:33:56,906 - __main__ - INFO - Reference statistics: 87 exact matches (85.3%), 9 doc+page matches (8.8%), 4 doc-only matches (3.9%), 0 legacy fuzzy matches (0.0%), 2 no matches (2.0%)
2025-03-07 11:33:56,906 - __main__ - INFO - Document-only match: 'chunk_DOC20241111091415Pliego_de_prescripciones_tecnicas_1741343570,0,s1_1' to 'chunk_DOC20241111091415Pliego_de_prescripciones_tecnicas_1741343570,1,s1_1'
2025-03-07 11:33:56,906 - __main__ - INFO - Document+page match: 'chunk_DOC20241111094338ANEXO_I_1741343572,0,s1_1.3.3.1' to 'chunk_DOC20241111094338ANEXO_I_1741343572,0,s2_1'
2025-03-07 11:33:56,906 - __main__ - INFO - Document+page match: 'chunk_DOC20241111091415Pliego_de_prescripciones_tecnicas_1741343570,5,s1_2.4' to 'chunk_DOC20241111091415Pliego_de_prescripciones_tecnicas_1741343570,5,s1_2.5'
2025-03-07 11:33:56,906 - __main__ - INFO - Document-only match: 'chunk_DOC20241111091415Pliego_de_prescripciones_tecnicas_1741343570,3,s1_2.2.1.4' to 'chunk_DOC20241111091415Pliego_de_prescripciones_tecnicas_1741343570,1,s1_1'
2025-03-07 11:33:56,907 - __main__ - INFO - Document+page match: 'chunk_DOC20241111091415Pliego_de_prescripciones_tecnicas_1741343570,5,s1_2.4' to 'chunk_DOC20241111091415Pliego_de_prescripciones_tecnicas_1741343570,5,s1_2.5'
2025-03-07 11:33:56,907 - __main__ - INFO - Document-only match: 'chunk_DOC20241111091415Pliego_de_prescripciones_tecnicas_1741343570,3,s1_2.2.1.4' to 'chunk_DOC20241111091415Pliego_de_prescripciones_tecnicas_1741343570,1,s1_1'
2025-03-07 11:33:56,907 - __main__ - INFO - Document-only match: 'chunk_DOC20241111091415Pliego_de_prescripciones_tecnicas_1741343570,3,s1_2.2.1.4' to 'chunk_DOC20241111091415Pliego_de_prescripciones_tecnicas_1741343570,1,s1_1'
2025-03-07 11:33:56,907 - __main__ - INFO - Document+page match: 'chunk_DOC20241111092201Pliego_de_clausulas_administrativas_1741343571,16,s1_8.2.1' to 'chunk_DOC20241111092201Pliego_de_clausulas_administrativas_1741343571,16,s1_8.2.2'
2025-03-07 11:33:56,907 - __main__ - INFO - Document+page match: 'chunk_DOC20241111094338ANEXO_I_1741343572,4,s1_2.3.1' to 'chunk_DOC20241111094338ANEXO_I_1741343572,4,s1_2.3.2'
2025-03-07 11:33:56,907 - __main__ - WARNING - Chunk reference not found: chunk_DOC20241111091193585_1741343569,2,s1_6.1.2.2
2025-03-07 11:33:56,907 - __main__ - WARNING - Chunk reference not found: chunk_DOC20241111091193585_1741343569,2,s1_6.1.2.2
2025-03-07 11:33:56,907 - __main__ - INFO - Document+page match: 'chunk_DOC20241111094338ANEXO_I_1741343572,3,s1_2.3.3' to 'chunk_DOC20241111094338ANEXO_I_1741343572,3,s1_1.3.5.2'
2025-03-07 11:33:56,908 - __main__ - INFO - Document+page match: 'chunk_DOC20241111092201Pliego_de_clausulas_administrativas_1741343571,11,s1_7.3.1' to 'chunk_DOC20241111092201Pliego_de_clausulas_administrativas_1741343571,11,s1_7.3.2'
2025-03-07 11:33:56,908 - __main__ - INFO - Document+page match: 'chunk_DOC20241111092201Pliego_de_clausulas_administrativas_1741343571,20,s1_10.3' to 'chunk_DOC20241111092201Pliego_de_clausulas_administrativas_1741343571,20,s1_8.3.4.1'
2025-03-07 11:33:56,908 - __main__ - INFO - Document+page match: 'chunk_DOC20241111092201Pliego_de_clausulas_administrativas_1741343571,20,s1_10.3' to 'chunk_DOC20241111092201Pliego_de_clausulas_administrativas_1741343571,20,s1_8.3.4.1'
2025-03-07 11:33:56,909 - __main__ - INFO - Processed document saved to data/processed/processed_client123_10/2024/CONM-CEE.md
2025-03-07 11:33:56,912 - __main__ - INFO - Document-only match: 'chunk_DOC20241111091415Pliego_de_prescripciones_tecnicas_1741343570,0,s1_1' to 'chunk_DOC20241111091415Pliego_de_prescripciones_tecnicas_1741343570,1,s1_1' for metadata
2025-03-07 11:33:56,912 - __main__ - INFO - Document+page match: 'chunk_DOC20241111094338ANEXO_I_1741343572,0,s1_1.3.3.1' to 'chunk_DOC20241111094338ANEXO_I_1741343572,0,s2_1' for metadata
2025-03-07 11:33:56,912 - __main__ - INFO - Document+page match: 'chunk_DOC20241111091415Pliego_de_prescripciones_tecnicas_1741343570,5,s1_2.4' to 'chunk_DOC20241111091415Pliego_de_prescripciones_tecnicas_1741343570,5,s1_2.5' for metadata
2025-03-07 11:33:56,912 - __main__ - INFO - Document-only match: 'chunk_DOC20241111091415Pliego_de_prescripciones_tecnicas_1741343570,3,s1_2.2.1.4' to 'chunk_DOC20241111091415Pliego_de_prescripciones_tecnicas_1741343570,1,s1_1' for metadata
2025-03-07 11:33:56,912 - __main__ - INFO - Document+page match: 'chunk_DOC20241111091415Pliego_de_prescripciones_tecnicas_1741343570,5,s1_2.4' to 'chunk_DOC20241111091415Pliego_de_prescripciones_tecnicas_1741343570,5,s1_2.5' for metadata
2025-03-07 11:33:56,912 - __main__ - INFO - Document-only match: 'chunk_DOC20241111091415Pliego_de_prescripciones_tecnicas_1741343570,3,s1_2.2.1.4' to 'chunk_DOC20241111091415Pliego_de_prescripciones_tecnicas_1741343570,1,s1_1' for metadata
2025-03-07 11:33:56,912 - __main__ - INFO - Document-only match: 'chunk_DOC20241111091415Pliego_de_prescripciones_tecnicas_1741343570,3,s1_2.2.1.4' to 'chunk_DOC20241111091415Pliego_de_prescripciones_tecnicas_1741343570,1,s1_1' for metadata
2025-03-07 11:33:56,912 - __main__ - INFO - Document+page match: 'chunk_DOC20241111092201Pliego_de_clausulas_administrativas_1741343571,16,s1_8.2.1' to 'chunk_DOC20241111092201Pliego_de_clausulas_administrativas_1741343571,16,s1_8.2.2' for metadata
2025-03-07 11:33:56,912 - __main__ - INFO - Document+page match: 'chunk_DOC20241111094338ANEXO_I_1741343572,4,s1_2.3.1' to 'chunk_DOC20241111094338ANEXO_I_1741343572,4,s1_2.3.2' for metadata
2025-03-07 11:33:56,912 - __main__ - WARNING - Chunk chunk_DOC20241111091193585_1741343569,2,s1_6.1.2.2 not found in metadata
2025-03-07 11:33:56,912 - __main__ - WARNING - Chunk chunk_DOC20241111091193585_1741343569,2,s1_6.1.2.2 not found in metadata
2025-03-07 11:33:56,912 - __main__ - INFO - Document+page match: 'chunk_DOC20241111094338ANEXO_I_1741343572,3,s1_2.3.3' to 'chunk_DOC20241111094338ANEXO_I_1741343572,3,s1_1.3.5.2' for metadata
2025-03-07 11:33:56,913 - __main__ - INFO - Document+page match: 'chunk_DOC20241111092201Pliego_de_clausulas_administrativas_1741343571,11,s1_7.3.1' to 'chunk_DOC20241111092201Pliego_de_clausulas_administrativas_1741343571,11,s1_7.3.2' for metadata
2025-03-07 11:33:56,913 - __main__ - INFO - Document+page match: 'chunk_DOC20241111092201Pliego_de_clausulas_administrativas_1741343571,20,s1_10.3' to 'chunk_DOC20241111092201Pliego_de_clausulas_administrativas_1741343571,20,s1_8.3.4.1' for metadata
2025-03-07 11:33:56,913 - __main__ - INFO - Document+page match: 'chunk_DOC20241111092201Pliego_de_clausulas_administrativas_1741343571,20,s1_10.3' to 'chunk_DOC20241111092201Pliego_de_clausulas_administrativas_1741343571,20,s1_8.3.4.1' for metadata
2025-03-07 11:33:56,913 - __main__ - INFO - Reference metadata statistics: 87 exact matches (85.3%), 9 doc+page matches (8.8%), 4 doc-only matches (3.9%), 0 legacy fuzzy matches (0.0%), 2 no matches (2.0%)
2025-03-07 11:33:56,914 - __main__ - INFO - Reference metadata saved to data/processed/reference_metadata_client123_10/2024/CONM-CEE.json
2025-03-07 11:33:56,914 - __main__ - INFO - Processed document saved to data/processed/processed_client123_10/2024/CONM-CEE.md
2025-03-07 11:33:56,915 - __main__ - INFO - Reference metadata saved to data/processed/reference_metadata_client123_10/2024/CONM-CEE.json
2025-03-07 11:33:56,915 - ai_document_generator_service - INFO - Generating conversational summary from AI document...
2025-03-07 11:33:56,915 - root - INFO - AFC is enabled with max remote calls: 10.
2025-03-07 11:33:58,518 - root - INFO - AFC remote call 1 is done.
2025-03-07 11:33:58,519 - ai_document_generator_service - INFO - 
Token Usage (Summary):
2025-03-07 11:33:58,519 - ai_document_generator_service - INFO - Prompt tokens: 10689
2025-03-07 11:33:58,519 - ai_document_generator_service - INFO - Response tokens: 204
2025-03-07 11:33:58,519 - ai_document_generator_service - INFO - Total tokens: 10893
2025-03-07 11:33:58,519 - __main__ - INFO - Tender processing completed in 69.70 seconds
2025-03-07 11:33:58,519 - __main__ - INFO - === Processing Results ===
2025-03-07 11:33:58,519 - __main__ - INFO - AI Summary: True
2025-03-07 11:33:58,520 - __main__ - INFO - AI Document: data/client_docs/client123_10/2024/CONM-CEE_1741343598.md
2025-03-07 11:33:58,520 - __main__ - INFO - Processed Document with References: data/processed/processed_client123_10/2024/CONM-CEE.md
2025-03-07 11:33:58,520 - __main__ - INFO - Reference Metadata: data/processed/reference_metadata_client123_10/2024/CONM-CEE.json
2025-03-07 11:33:58,520 - __main__ - INFO - Processing time: 69.70 seconds
2025-03-07 11:33:58,520 - __main__ - INFO - 
AI Summary Sample:
2025-03-07 11:33:58,520 - __main__ - INFO - La licitación 10/2024/CONM-CEE busca proveedor para el suministro de plantas y decoración floral navideña en el centro de Jaén. El proyecto se divide en dos lotes: Suministro de plantas (7.040€ + IVA)...
2025-03-07 12:05:53,757 - __main__ - INFO - Directories created
2025-03-07 12:05:53,760 - __main__ - INFO - Processing tender 10/2024/CONM-CEE for client client123...
2025-03-07 12:05:53,760 - __main__ - INFO - Starting tender processing for tender_id=10/2024/CONM-CEE, client_id=client123
2025-03-07 12:05:53,760 - __main__ - INFO - Processing 5 missing documents
2025-03-07 12:05:53,760 - document_retrieval_service - INFO - Downloading PDF from https://contrataciondelestado.es/FileSystem/servlet/GetDocumentByIdServlet?DocumentIdParam=cGvQdaF/qmEnKvN211kkZep9eLYPa5sPlu0VFp1fA/h5Fg1pTaKl4FN73msJksylIVq1IvdI5PofzpP36PwDr6Jmx2BDu2S/t4P9dvlPFULfdyQgZAdTm3EfcUAC7CJ6&cifrado=QUC1GjXXSiLkydRHJBmbpw%3D%3D...
2025-03-07 12:05:54,153 - document_retrieval_service - INFO - PDF downloaded to data/raw_pdfs/DOC_CN2024-001193585_1741345554.pdf
2025-03-07 12:05:54,154 - document_retrieval_service - INFO - Downloading PDF from https://contrataciondelestado.es/FileSystem/servlet/GetDocumentByIdServlet?DocumentIdParam=z/ghU5864J3UKnVAwwWNrCp9Nvi9o32DrO2HfqSQ/7y0QPTDGl%2BTgSxAzGaBF9hR0w94oIWtN2EkYA0Og4DmgZLmV7aY3ZdlQ8%2BxtPvjDpeB0nvVKRzfe4rpHcnlPhSZ&cifrado=QUC1GjXXSiLkydRHJBmbpw%3D%3D...
2025-03-07 12:05:54,908 - document_retrieval_service - INFO - PDF downloaded to data/raw_pdfs/DOC20241111091415Pliego_de_prescripciones_tecnicas_1741345554.pdf
2025-03-07 12:05:54,909 - document_retrieval_service - INFO - Downloading PDF from https://contrataciondelestado.es/FileSystem/servlet/GetDocumentByIdServlet?DocumentIdParam=8hgVPRbuSgXhyguKtFy5AiXeHvokF%2B2dllmtzd8sapWTAcvE3IDVxGhRuhi9GWXq2A4V3aEdzAqu7KG6zJkIGd4Rr6XPeaqztAIX1SSQM%2B2B0nvVKRzfe4rpHcnlPhSZ&cifrado=QUC1GjXXSiLkydRHJBmbpw%3D%3D...
2025-03-07 12:05:55,732 - document_retrieval_service - INFO - PDF downloaded to data/raw_pdfs/DOC20241111092201Pliego_de_clausulas_administrativas_1741345555.pdf
